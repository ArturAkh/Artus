[global]
backend = host
task = ROOTTask
workdir = $PROJECT_DIR/workdir_merge
variable markers = @
cmdargs = -Gcm 1

[jobs]
in flight = 8
wall time = 2:00

[ROOTTask]
executable = $CMSSW_BASE/bin/$SCRAM_ARCH/artusMergeOutputs.sh
arguments = @DATASETNICK@.root @FILE_NAMES@
input files =
	$HADD_PATH
send executable = true
dataset = :gc:$PROJECT_DIR/workdir/
dataset splitter = BlockBoundarySplitter
scanner =
	OutputDirsFromWork
	ObjectsFromCMSSW
	JobInfoFromOutputDir
	FilesFromJobInfo
	MatchOnFilename
	MatchDelimeter
	MetadataFromCMSSW
	SEListFromPath
	DetermineEvents
delimeter dataset key = _:0:-3
dataset name pattern = @DELIMETER_DS@

[storage]
se path = $PROJECT_DIR/merged
se output files = @DATASETNICK@.root
se output pattern = @DATASETNICK@/@DATASETNICK@.root
